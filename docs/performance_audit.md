## üß≠ –¶–µ–ª–∏ –∞—É–¥–∏—Ç–∞

- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–∫–ª–∏–∫ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –æ—Å–Ω–æ–≤–Ω—ã—Ö endpoint'–æ–≤
- –û—Ü–µ–Ω–∏—Ç—å —Ä–µ—Å—É—Ä—Å–æ—ë–º–∫–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã –≤ –Ω–æ—Ä–º–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö
- –í—ã—è–≤–∏—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É–∑–∫–∏–µ –º–µ—Å—Ç–∞
- –†–µ—à–∏—Ç—å, –Ω—É–∂–Ω—ã –ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

---

## üß™ 1. –ó–∞–º–µ—Ä—ã –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞ (latency)

| Endpoint                | –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ (ms) | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π               |
|------------------------|-------------------|---------------------------|
| `GET /meta`            | 0.779            | –û—Ç–ª–∏—á–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å         |
| `GET /public_url`      | 3.074            | –ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ ngrok.url    |
| `POST /agent/status`   | 0.879            | –ë—ã—Å—Ç—Ä–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è —Å –ë–î     |
| `POST /run_bash`       | 0.919            | –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã        |
| `POST /agent/pipeline` | 0.935            | –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã  |

*–ó–∞–º–µ—Ä—ã –ø—Ä–æ–≤–µ–¥–µ–Ω—ã —á–µ—Ä–µ–∑ `curl` –≤ 3 –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è—Ö.*

---

## üßÆ 2. –ù–∞–≥—Ä—É–∑–∫–∞ –∏ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

| –ú–µ—Ç—Ä–∏–∫–∞                          | –ó–Ω–∞—á–µ–Ω–∏–µ     | –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç         |
|----------------------------------|--------------|---------------------|
| CPU usage (idle / –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π)| 10.7%       | `ps -p 72720`      |
| RAM usage (MB)                  | 0.3%        | `ps -p 72720`      |
| I/O –æ–ø–µ—Ä–∞—Ü–∏–∏ (write/read)       | –ù–∏–∑–∫–∞—è      | –°–∏—Å—Ç–µ–º–∞ –Ω–µ I/O bound |
| –†–∞–∑–º–µ—Ä –±–∞–∑—ã `agents.db`         | 20KB        | `du -h`            |
| –†–∞–∑–º–µ—Ä `porta.log`              | 4KB         | `du -h`            |

---

## üìÅ 3. SQLite –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

- –ö–æ–ª-–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö: `agents` (1), `operations` (2)
- –í—Ä–µ–º—è –≤—ã–±–æ—Ä–∫–∏ 10 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π: < 1ms
- –ö–æ–ª-–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π, –¥–æ–±–∞–≤–ª—è–µ–º—ã—Ö –≤ –º–∏–Ω—É—Ç—É: ~2-3

---

## üß© 4. –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–¥ —É–º–µ—Ä–µ–Ω–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π

**–°—Ü–µ–Ω–∞—Ä–∏–π:**  
100 –∑–∞–ø—Ä–æ—Å–æ–≤, 10 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ (ping benchmark)

**–ú–µ—Ç–æ–¥:**  
–°–∫—Ä–∏–ø—Ç `ping_benchmark.py` —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**  
- –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: **998.70ms**
- –û—à–∏–±–∫–∏: **0%** (100% —É—Å–ø–µ—à–Ω–æ—Å—Ç—å)
- –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ –ø–∏–∫–µ: **–ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ–µ** (CV: 33.3%)
- P95: **1813.52ms**
- P99: **2026.20ms**

---

## üß≠ –í—ã–≤–æ–¥—ã (–æ–±–Ω–æ–≤–ª–µ–Ω–æ –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏)

### ‚ùì –ï—Å—Ç—å –ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤ Redis?
**–ù–ï–¢** - –ü–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è —Ç–µ–∫—É—â–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫. Redis –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ –∏–∑ `docs/decisions/redis_adoption_criteria.md`:
- 5+ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤
- P95 > 2000ms
- CV > 50%
- –†–∞–∑–º–µ—Ä –ë–î > 100MB

### ‚ùì –ù—É–∂–µ–Ω –ª–∏ connection pool –¥–ª—è SQLite?
**–ù–ï–¢** - SQLite —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ –¥–ª—è —Ç–µ–∫—É—â–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫:
- –¢–æ–ª—å–∫–æ 1 –∞–≥–µ–Ω—Ç –∏ 2 –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –ë–î
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ < 1ms –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å –ë–î
- SQLite –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫

### ‚ùì –ü—Ä–æ–±–ª–µ–º—ã —Å I/O?
**–ù–ï–¢** - –°–∏—Å—Ç–µ–º–∞ –Ω–µ I/O bound:
- –†–∞–∑–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤ –Ω–µ–±–æ–ª—å—à–∏–µ (20KB –ë–î, 4KB –ª–æ–≥)
- –û–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ñ–∞–π–ª–∞–º–∏ –±—ã—Å—Ç—Ä—ã–µ
- –û—Å–Ω–æ–≤–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ CPU

### ‚ùì –ï—Å—Ç—å –ª–∏ –ª–∞–≥–∏ –≤ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–∏?
**–ù–ï–¢** - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ:
- –†–∞–∑–º–µ—Ä –ª–æ–≥–∞ –≤—Å–µ–≥–æ 4KB
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ

### ‚ùì –ï—Å—Ç—å –ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –º–µ–Ω—è—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É?
**–ù–ï–¢** - –ü–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ç–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞:
- –ö–æ–¥ —Å—Ç–∞–ª —á–∏—â–µ –∏ –ø–æ–Ω—è—Ç–Ω–µ–µ
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –ª–æ–≥–∏—á–Ω–∞
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª–Ω–∞—è
- –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–æ—Å—Ç—É

**–û–±—â–µ–µ –∑–∞–∫–ª—é—á–µ–Ω–∏–µ:**  
Porta –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç **–æ—Ç–ª–∏—á–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** –∏ **—Å—Ç–∞–±–∏–ª—å–Ω—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** –¥–ª—è —Ç–µ–∫—É—â–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫. –û—á–∏—Å—Ç–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ —É–ª—É—á—à–∏–ª–∞ –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å. –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏ –∏–º–µ–µ—Ç —á—ë—Ç–∫–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –¥–ª—è –±—É–¥—É—â–∏—Ö —É–ª—É—á—à–µ–Ω–∏–π. –û—Å–Ω–æ–≤–Ω–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —Å–ª–µ–¥–æ–≤–∞—Ç—å –∫—Ä–∏—Ç–µ—Ä–∏—è–º –∏–∑ `docs/decisions/redis_adoption_criteria.md`.

---

## üì¶ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è

- ‚úÖ –°–∫—Ä–∏–ø—Ç –∑–∞–º–µ—Ä–æ–≤: `ping_benchmark.py`
- ‚úÖ –°–∫—Ä–∏–ø—Ç —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç–∞: `stress_test.py` (–æ—Ç –≠–ª–∏–∏)
- ‚úÖ –í—ã–≤–æ–¥ `ps`, `du`, `sqlite3`

### üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

1. **Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –¥–ª—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞
2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤** - —É–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
3. **Connection pooling** - –¥–ª—è –±—É–¥—É—â–µ–≥–æ —Ä–æ—Å—Ç–∞ –Ω–∞–≥—Ä—É–∑–∫–∏
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** - –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
